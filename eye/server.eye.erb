#require 'eye-http'

Eye.config do
  http :enable => true, :host => "0.0.0.0", :port => 10001
end

Eye.application '<%= hostname %>' do
  process :nginx do
    pid_file '/opt/nginx/logs/nginx.pid'
    start_command "service nginx start"
    restart_command "service nginx restart"
    stop_command "service nginx stop"

    restart_grace 30.seconds
  end
  
  group 'Storage' do
  
    process :postgresql do
      pid_file '/var/run/postgresql/9.3-main.pid'
      start_command "service postgresql start"
      restart_command "service postgresql restart"
      stop_command "service postgresql stop"

      restart_grace 30.seconds
    end
  
    process :redis do
      pid_file '/var/run/redis_6379.pid'
      start_command "service redis_6379 start"
      restart_command "service redis_6379 restart"
      stop_command "service redis_6379 stop"

      restart_grace 30.seconds
    end
  
    process :mongodb do
      pid_file '/var/run/mongod.pid'
      start_command "service mongodb start"
      restart_command "service mongodb restart"
      stop_command "service mongodb stop"

      restart_grace 30.seconds
    end
    
  end
end
